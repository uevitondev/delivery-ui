<main>
  <div class="form-container">
    <h1>HABILITE SUA NOVA CONTA</h1>
    <p>token de verificação enviado! consulte sua caixa de entrada...</p>
    <form [formGroup]="signupVerificationForm">
      <div class="input-group">
        <label for="token">Token</label>
        <input
          id="token"
          formControlName="token"
          type="text"
          placeholder="token de verificação"
        />
        @if (token?.invalid && token?.touched) {
          <div class="error-message">
            @if (token?.errors?.["required"]) {
              <small>O token é obrigatório.</small>
            }
            @if (token?.errors?.["minlength"]) {
              <small>O token deve ter no máximo 6 caracteres.</small>
            }
            @if (token?.errors?.["maxlength"]) {
              <small>O token deve ter no máximo 6 caracteres.</small>
            }
          </div>
        }
      </div>
    </form>

    <p>
      não recebeu o token?
      <a (click)="newVerificationToken()">reenviar token</a>
    </p>

    <div>
      @if (isLoading) {
        <button
          class="btn-primary"
          [disabled]="isLoading"
          type="button"
          disabled
        >
          <span
            class="spinner-border spinner-border-sm"
            role="status"
            aria-hidden="true"
          ></span>
        </button>
      } @else {
        <button
          class="btn-primary"
          [disabled]="!signupVerificationForm.valid"
          (click)="validateToken()"
        >
          VALIDAR TOKEN
        </button>
      }
    </div>
  </div>
</main>
